<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UGemini: QuickStart and Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UGemini<span id="projectnumber">&#160;1.4.0-preview.4</span>
   </div>
   <div id="projectbrief">A C# wrapper for the Google Gemini API.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__u_gemini_2_packages_2com_8uralstech_8ugemini_2_documentation_0i_2_main_page.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">QuickStart and Documentation</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#autotoc_md1">Setup</a></li>
<li class="level2"><a href="#autotoc_md2">GeminiManager</a><ul><li class="level3"><a href="#autotoc_md3">Beta API</a></li>
<li class="level3"><a href="#autotoc_md4">Models</a></li>
<li class="level3"><a href="#autotoc_md5">QuickStart: generateContent (Chat) Request</a></li>
<li class="level3"><a href="#autotoc_md6">QuickStart: Multi-turn generateContent Request</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md7">GeminiChatRequest In-Depth</a><ul><li class="level3"><a href="#autotoc_md8">Streaming Responses</a></li>
<li class="level3"><a href="#autotoc_md9">Adding Media Content to Requests</a><ul><li class="level4"><a href="#autotoc_md10">Utility Methods</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md11">Function Calling</a></li>
<li class="level3"><a href="#autotoc_md12">JSON Response Mode</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md13">Model Metadata</a><ul><li class="level3"><a href="#autotoc_md14">GeminiModelGetRequest</a></li>
<li class="level3"><a href="#autotoc_md15">GeminiModelListRequest</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md16">GeminiTokenCountRequest</a></li>
<li class="level2"><a href="#autotoc_md17">File API</a><ul><li class="level3"><a href="#autotoc_md18">Uploading Files</a></li>
<li class="level3"><a href="#autotoc_md19">Listing All Files</a></li>
<li class="level3"><a href="#autotoc_md20">Retrieving File Metadata</a></li>
<li class="level3"><a href="#autotoc_md21">Deleting a File</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md22">Samples</a><ul><li class="level3"><a href="#autotoc_md23">Mult-turn Chat</a></li>
<li class="level3"><a href="#autotoc_md24">Function Calling</a></li>
<li class="level3"><a href="#autotoc_md25">Streaming Generated Content</a></li>
<li class="level3"><a href="#autotoc_md26">Question Answering</a></li>
<li class="level3"><a href="#autotoc_md27">Prompting with File API</a></li>
<li class="level3"><a href="#autotoc_md28">JSON Response</a></li>
<li class="level3"><a href="#autotoc_md29">List and Get Model Metadata</a></li>
<li class="level3"><a href="#autotoc_md30">Token Counting</a></li>
</ul>
</li>
</ul>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Setup</h2>
<p>Add an instance of <code>GeminiManager</code> to your scene, and set it up with your Gemini API key. You can get your API key from <a href="https://makersuite.google.com/app/apikey"><em>here</em></a>.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
GeminiManager</h2>
<p>There are only two methods in <code>GeminiManager</code>:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">What it does    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SetApiKey</code>   </td><td class="markdownTableBodyNone">Sets the Gemini API key through code    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Request</code>   </td><td class="markdownTableBodyNone">Computes a request on the Gemini API    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>StreamRequest</code>*   </td><td class="markdownTableBodyNone">Computes a streaming request on the Gemini API   </td></tr>
</table>
<p>*Requires <code>Utilities.Async</code> package.</p>
<p>All computations on the Gemini API are done through <code>GeminiManager.Request</code>, <code>GeminiManager.StreamRequest</code> and their variants.</p>
<p>In this documentation, the fields and properties of each type will not be explained. Every type has been fully documented in code, so please check the code docstrings to learn more about each type.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
Beta API</h3>
<p><code>GeminiManager</code> supports both the <code>v1</code> and <code>v1beta</code> Gemini API versions. As a lot of features are still unsupported in the main <code>v1</code> API, you may need to use the Beta API. You can set the <code>useBetaApi</code> boolean parameter in the request constructor to do so.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
Models</h3>
<p><code>GeminiModel</code> from <code><a class="el" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a></code> has four static model IDs:</p>
<ul>
<li><a href="https://ai.google.dev/gemini-api/docs/models/gemini#gemini-1.5-flash"><code>Gemini1_5Flash</code></a></li>
<li><a href="https://ai.google.dev/gemini-api/docs/models/gemini#gemini-1.5-pro"><code>Gemini1_5Pro</code></a></li>
<li><a href="https://ai.google.dev/gemini-api/docs/models/gemini#gemini-1.0-pro"><code>Gemini1_0Pro</code></a></li>
<li><a href="https://ai.google.dev/gemini-api/docs/models/gemini#gemini-1.0-pro-vision"><code>Gemini1_0ProVision</code></a><ul>
<li>Gemini 1.0 Pro Vision is deprecated. Use Use 1.5 Flash (<code>Gemini1_5Flash</code>) or 1.5 Pro (<code>Gemini1_5Pro</code>) instead.</li>
</ul>
</li>
<li><a href="https://ai.google.dev/gemini-api/docs/models/gemini#text-embedding"><code>TextEmbedding004</code></a></li>
<li><a href="https://ai.google.dev/gemini-api/docs/models/gemini#aqa"><code>Aqa</code></a></li>
</ul>
<p>You can provide these to the <code>model</code> parameter in the constructors for model-related requests. UGemini can also implicitly convert <code>string</code> model IDs to <code>GeminiModelId</code> objects.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
QuickStart: generateContent (Chat) Request</h3>
<p>This is a simple request that asks Gemini a question and logs the response to the console.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"> </div>
<div class="line">async <span class="keywordtype">void</span> QueryGemini()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">string</span> text = <span class="stringliteral">&quot;Hello! How are you doing?&quot;</span>;</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a>&gt;(</div>
<div class="line">        <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request.html">GeminiChatRequest</a>(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#a3b0a0484e82dc1877abb45e3db5fe589">Gemini1_5Flash</a>)</div>
<div class="line">        {</div>
<div class="line">            Contents = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>[]</div>
<div class="line">            {</div>
<div class="line">                <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(text, <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a0d462193ef311a2c0dcde6730b1cea52">GeminiRole</a>.User),</div>
<div class="line">            },</div>
<div class="line">        }</div>
<div class="line">    );</div>
<div class="line"> </div>
<div class="line">    Debug.Log(response.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Parts</a>[0].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#af9e3d8f3de91a004055ee2599a1b75d4">Text</a>);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request.html">Uralstech.UGemini.Chat.GeminiChatRequest</a></div><div class="ttdoc">Request to generate a response from the model.</div><div class="ttdef"><b>Definition</b> GeminiChatRequest.cs:18</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">Uralstech.UGemini.Chat.GeminiChatResponse</a></div><div class="ttdoc">Response from the model supporting multiple candidates.</div><div class="ttdef"><b>Definition</b> GeminiChatResponse.cs:20</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response_html_af1d3aa0f8c16eea71168233a6b1666c2"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Uralstech.UGemini.Chat.GeminiChatResponse.Parts</a></div><div class="ttdeci">GeminiContentPart[] Parts</div><div class="ttdoc">The parts of the GeminiChatResponse message.</div><div class="ttdef"><b>Definition</b> GeminiChatResponse.cs:40</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_content_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">Uralstech.UGemini.GeminiContent</a></div><div class="ttdoc">The base structured datatype containing multi-part content of a message.</div><div class="ttdef"><b>Definition</b> GeminiContent.cs:16</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_content_html_adf06a76c715005062c9f5d91f79af90a"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">Uralstech.UGemini.GeminiContent.GetContent</a></div><div class="ttdeci">static GeminiContent GetContent(string message, GeminiRole role=GeminiRole.Unspecified)</div><div class="ttdoc">Creates a new GeminiContent from a role and message.</div><div class="ttdef"><b>Definition</b> GeminiContent.cs:34</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_content_part_html_af9e3d8f3de91a004055ee2599a1b75d4"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#af9e3d8f3de91a004055ee2599a1b75d4">Uralstech.UGemini.GeminiContentPart.Text</a></div><div class="ttdeci">string Text</div><div class="ttdoc">Inline text.</div><div class="ttdef"><b>Definition</b> GeminiContentPart.cs:18</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_manager_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">Uralstech.UGemini.GeminiManager</a></div><div class="ttdoc">The class for accessing the Gemini API!</div><div class="ttdef"><b>Definition</b> GeminiManager.cs:17</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">Uralstech.UGemini.Models.GeminiModel</a></div><div class="ttdoc">Information about a Generative Language Model.</div><div class="ttdef"><b>Definition</b> GeminiModel.cs:11</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_html_a3b0a0484e82dc1877abb45e3db5fe589"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#a3b0a0484e82dc1877abb45e3db5fe589">Uralstech.UGemini.Models.GeminiModel.Gemini1_5Flash</a></div><div class="ttdeci">static readonly GeminiModelId Gemini1_5Flash</div><div class="ttdoc">Gemini 1.5 Flash is a fast and versatile multimodal model for scaling across diverse tasks.</div><div class="ttdef"><b>Definition</b> GeminiModel.cs:56</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton_html_a84485d2d649cb79a823a37e96821067c"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Uralstech.UGemini.Utils.Singleton.Singleton.Instance</a></div><div class="ttdeci">static T Instance</div><div class="ttdoc">The active instance of type T .</div><div class="ttdef"><b>Definition</b> Singleton.cs:18</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_chat_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a></div><div class="ttdef"><b>Definition</b> GeminiChatRequest.cs:12</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_models_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a></div><div class="ttdef"><b>Definition</b> GeminiModel.cs:5</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a></div><div class="ttdef"><b>Definition</b> GeminiAnswerRequest.cs:7</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_html_a0d462193ef311a2c0dcde6730b1cea52"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini.html#a0d462193ef311a2c0dcde6730b1cea52">Uralstech.UGemini.GeminiRole</a></div><div class="ttdeci">GeminiRole</div><div class="ttdoc">The role of a Gemini content creator.</div><div class="ttdef"><b>Definition</b> GeminiRole.cs:13</div></div>
</div><!-- fragment --><p>That's all! We give a request argument of type <code>GeminiChatRequest</code>, specify that we expect a response of type <code>GeminiChatResponse</code>, and voil√†! We've got the response in <code>response.Parts[0].Text</code>!</p>
<h3><a class="anchor" id="autotoc_md6"></a>
QuickStart: Multi-turn generateContent Request</h3>
<p>This is a simple method that maintains the user's chat history with Gemini.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"> </div>
<div class="line">List&lt;GeminiContent&gt; _chatHistory = <span class="keyword">new</span>();</div>
<div class="line"> </div>
<div class="line">async Task&lt;string&gt; OnChat(<span class="keywordtype">string</span> text)</div>
<div class="line">{</div>
<div class="line">    _chatHistory.Add(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(text, <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a0d462193ef311a2c0dcde6730b1cea52">GeminiRole</a>.User));</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a>&gt;(</div>
<div class="line">        <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request.html">GeminiChatRequest</a>(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#a3b0a0484e82dc1877abb45e3db5fe589">Gemini1_5Flash</a>)</div>
<div class="line">        {</div>
<div class="line">            Contents = _chatHistory.ToArray(),</div>
<div class="line">        }</div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    _chatHistory.Add(response.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#a55e6d4a65bd637dbfbb8db55b8433ea1">Candidates</a>[0].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_candidate.html#ad3ed32bfdd202e0f6d193e30666a3a79">Content</a>);</div>
<div class="line">    <span class="keywordflow">return</span> response.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Parts</a>[0].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#af9e3d8f3de91a004055ee2599a1b75d4">Text</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_candidate_html_ad3ed32bfdd202e0f6d193e30666a3a79"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_candidate.html#ad3ed32bfdd202e0f6d193e30666a3a79">Uralstech.UGemini.Chat.GeminiCandidate.Content</a></div><div class="ttdeci">GeminiContent Content</div><div class="ttdoc">Generated content returned from the model.</div><div class="ttdef"><b>Definition</b> GeminiCandidate.cs:16</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response_html_a55e6d4a65bd637dbfbb8db55b8433ea1"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#a55e6d4a65bd637dbfbb8db55b8433ea1">Uralstech.UGemini.Chat.GeminiChatResponse.Candidates</a></div><div class="ttdeci">GeminiCandidate[] Candidates</div><div class="ttdoc">Candidate responses from the model.</div><div class="ttdef"><b>Definition</b> GeminiChatResponse.cs:24</div></div>
</div><!-- fragment --><p>Here, we simply have a list of <code>GeminiContent</code> objects, which tracks the messages of the conversation. Every time <code>OnChat</code> is called, the user's request and the model's reply are added the the list.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
GeminiChatRequest In-Depth</h2>
<p>Available in the <code><a class="el" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a></code> namespace. Generates content from the given model by running a <code>generateContent</code> request.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Streaming Responses</h3>
<p><code>GeminiChatRequest</code> allows you to stream Gemini's response in real-time. You can do so by using <code>GeminiManager.StreamRequest</code> and utilizing the callback in <code>GeminiChatRequest</code>.</p>
<p>You can even stream function calls! Check out the <code>Streaming Generated Content</code> sample included in the package.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"> </div>
<div class="line">[SerializeField] Text _chatResponse;</div>
<div class="line"> </div>
<div class="line">async Task&lt;string&gt; OnChat(<span class="keywordtype">string</span> text)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.StreamRequest(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request.html">GeminiChatRequest</a>(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#a3b0a0484e82dc1877abb45e3db5fe589">Gemini1_5Flash</a>)</div>
<div class="line">    {</div>
<div class="line">        Contents = new GeminiContent[]</div>
<div class="line">        {</div>
<div class="line">            GeminiContent.GetContent(text, GeminiRole.User),</div>
<div class="line">        },</div>
<div class="line">    </div>
<div class="line">        OnPartialResponseReceived = streamedResponse =&gt;</div>
<div class="line">        {</div>
<div class="line">            _chatResponse.text = streamedResponse.Parts[0].Text;</div>
<div class="line">            return Task.CompletedTask;</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> response.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Parts</a>[0].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#af9e3d8f3de91a004055ee2599a1b75d4">Text</a>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you do not want to use the callback, you can let the <code>StreamRequest</code> task run in the background, and access the streamed data from the <code>GeminiChatRequest.StreamedResponse</code> property.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
Adding Media Content to Requests</h3>
<p><code>GeminiContent.Parts</code> contains the actual contents of each chat request and response. You can add media content to the <code>Parts</code> array, but you must only have one type of data in each part, like one part of text, one part of an image, and so on. The following samples shows data being read from a file and into a <code>GeminiContent</code> object.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;GeminiContent&gt; GetFileContent(<span class="keywordtype">string</span> filePath, <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a9a890005b5ee88d5fe8e33a592f1c73c">GeminiContentType</a> contentType)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">byte</span>[] data;</div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        data = await File.ReadAllBytesAsync(filePath);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (SystemException exception)</div>
<div class="line">    {</div>
<div class="line">        Debug.LogError($<span class="stringliteral">&quot;Failed to load file: {exception.Message}&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>()</div>
<div class="line">    {</div>
<div class="line">        Parts = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html">GeminiContentPart</a>[]</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html">GeminiContentPart</a>()</div>
<div class="line">            {</div>
<div class="line">                Text = <span class="stringliteral">&quot;What&#39;s in this file?&quot;</span></div>
<div class="line">            },</div>
<div class="line">            <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html">GeminiContentPart</a>()</div>
<div class="line">            {</div>
<div class="line">                InlineData = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_blob.html">GeminiContentBlob</a>()</div>
<div class="line">                {</div>
<div class="line">                    MimeType = contentType,</div>
<div class="line">                    Data = Convert.ToBase64String(data)</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_content_blob_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_content_blob.html">Uralstech.UGemini.GeminiContentBlob</a></div><div class="ttdoc">Raw media bytes.</div><div class="ttdef"><b>Definition</b> GeminiContentBlob.cs:14</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_content_part_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html">Uralstech.UGemini.GeminiContentPart</a></div><div class="ttdoc">A datatype containing media that is part of a multi-part Content message. Must only contain one field...</div><div class="ttdef"><b>Definition</b> GeminiContentPart.cs:13</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_html_a9a890005b5ee88d5fe8e33a592f1c73c"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini.html#a9a890005b5ee88d5fe8e33a592f1c73c">Uralstech.UGemini.GeminiContentType</a></div><div class="ttdeci">GeminiContentType</div><div class="ttdoc">Enum for the types of content able to be fed to the Gemini API.</div><div class="ttdef"><b>Definition</b> GeminiContentType.cs:12</div></div>
</div><!-- fragment --><p>Now, the <code>GeminiContent</code> returned by the method can be fed into a chat request!</p>
<h4><a class="anchor" id="autotoc_md10"></a>
Utility Methods</h4>
<p><code>GeminiContent</code> and <code>GeminiContentBlob</code> also contain static utility methods to help create them from Unity types like <code>AudioClip</code> or <code>Texture2D</code>:</p>
<ul>
<li><code>GeminiContent.GetContent</code><ul>
<li>Can convert <code>string</code> messages, <code>Texture2D</code> images, <code>AudioClip</code>* audio and <code>GeminiFile</code> data to <code>GeminiContent</code> objects.</li>
</ul>
</li>
<li><code>GeminiContentBlob.GetContentBlob</code><ul>
<li>Can convert <code>Texture2D</code> images and <code>AudioClip</code>* audio to <code>GeminiContentBlob</code> objects.</li>
</ul>
</li>
</ul>
<p><em>Requires [*Utilities.Encoding.Wav</em>](<a href="https://openupm.com/packages/com.utilities.encoder.wav/">https://openupm.com/packages/com.utilities.encoder.wav/</a>).</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Function Calling</h3>
<p>First, we have to setup our tools and define our function schemas.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html">Uralstech.UGemini.Schema</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_tools.html">Uralstech.UGemini.Tools</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration.html">Uralstech.UGemini.Tools.Declaration</a>;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool.html">GeminiTool</a> _geminiFunctions = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool.html">GeminiTool</a>()</div>
<div class="line">{</div>
<div class="line">    FunctionDeclarations = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_function_declaration.html">GeminiFunctionDeclaration</a>[]</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_function_declaration.html">GeminiFunctionDeclaration</a>()</div>
<div class="line">        {</div>
<div class="line">            Name = <span class="stringliteral">&quot;printToConsole&quot;</span>,</div>
<div class="line">            Description = <span class="stringliteral">&quot;Print text to the user&#39;s console.&quot;</span>,</div>
<div class="line">            Parameters = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">            {</div>
<div class="line">                Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.Object,</div>
<div class="line">                Properties = <span class="keyword">new</span> Dictionary&lt;string, GeminiSchema&gt;()</div>
<div class="line">                {</div>
<div class="line">                    {</div>
<div class="line">                        <span class="stringliteral">&quot;text&quot;</span>, <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">                        {</div>
<div class="line">                            Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.String,</div>
<div class="line">                            Description = <span class="stringliteral">&quot;The text to print. e.g. \&quot;Hello, World!\&quot;&quot;</span>,</div>
<div class="line">                            Nullable = <span class="keyword">false</span>,</div>
<div class="line">                        }</div>
<div class="line">                    },</div>
<div class="line">                },</div>
<div class="line">                Required = <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;text&quot;</span> },</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_function_declaration.html">GeminiFunctionDeclaration</a>()</div>
<div class="line">        {</div>
<div class="line">            Name = <span class="stringliteral">&quot;changeTextColor&quot;</span>,</div>
<div class="line">            Description = <span class="stringliteral">&quot;Change the color of the text.&quot;</span>,</div>
<div class="line">            Parameters = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">            {</div>
<div class="line">                Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.Object,</div>
<div class="line">                Properties = <span class="keyword">new</span> Dictionary&lt;string, GeminiSchema&gt;()</div>
<div class="line">                {</div>
<div class="line">                    {</div>
<div class="line">                        <span class="stringliteral">&quot;color&quot;</span>, <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">                        {</div>
<div class="line">                            Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.String,</div>
<div class="line">                            Description = <span class="stringliteral">&quot;The color to set. e.g. \&quot;BLUE\&quot;&quot;</span>,</div>
<div class="line">                            Format = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#abb0c9f7d6bbb1d4940ef8553d6377068">GeminiSchemaDataFormat</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html#a6c034cc47b4abda6d72bd44039624d43">Enum</a>,</div>
<div class="line">                            <a class="code hl_enumvalue" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#abb0c9f7d6bbb1d4940ef8553d6377068acf20423ed48998082c20099488a0917c">Enum</a> = <span class="keyword">new</span> <span class="keywordtype">string</span>[]</div>
<div class="line">                            {</div>
<div class="line">                                <span class="stringliteral">&quot;RED&quot;</span>,</div>
<div class="line">                                <span class="stringliteral">&quot;GREEN&quot;</span>,</div>
<div class="line">                                <span class="stringliteral">&quot;BLUE&quot;</span>,</div>
<div class="line">                                <span class="stringliteral">&quot;WHITE&quot;</span>,</div>
<div class="line">                            },</div>
<div class="line">                            Nullable = <span class="keyword">false</span>,</div>
<div class="line">                        }</div>
<div class="line">                    },</div>
<div class="line">                },</div>
<div class="line">                Required = <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;color&quot;</span> },</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    },</div>
<div class="line">};</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">Uralstech.UGemini.Schema.GeminiSchema</a></div><div class="ttdoc">The Schema object allows the definition of input and output data types. These types can be objects,...</div><div class="ttdef"><b>Definition</b> GeminiSchema.cs:13</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema_html_a6c034cc47b4abda6d72bd44039624d43"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html#a6c034cc47b4abda6d72bd44039624d43">Uralstech.UGemini.Schema.GeminiSchema.Enum</a></div><div class="ttdeci">string[] Enum</div><div class="ttdoc">Possible values of the element of GeminiSchemaDataType.String with enum format.</div><div class="ttdef"><b>Definition</b> GeminiSchema.cs:59</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_function_declaration_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_function_declaration.html">Uralstech.UGemini.Tools.Declaration.GeminiFunctionDeclaration</a></div><div class="ttdoc">Structured representation of a function declaration as defined by the OpenAPI 3.03 specification....</div><div class="ttdef"><b>Definition</b> GeminiFunctionDeclaration.cs:15</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool.html">Uralstech.UGemini.Tools.Declaration.GeminiTool</a></div><div class="ttdoc">Tool details that the model may use to generate response.</div><div class="ttdef"><b>Definition</b> GeminiTool.cs:16</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_schema_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_schema.html">Uralstech.UGemini.Schema</a></div><div class="ttdef"><b>Definition</b> GeminiSchema.cs:7</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_schema_html_abb0c9f7d6bbb1d4940ef8553d6377068"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#abb0c9f7d6bbb1d4940ef8553d6377068">Uralstech.UGemini.Schema.GeminiSchemaDataFormat</a></div><div class="ttdeci">GeminiSchemaDataFormat</div><div class="ttdoc">Defines the format of schema data.</div><div class="ttdef"><b>Definition</b> GeminiSchemaDataFormat.cs:12</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_schema_html_abb0c9f7d6bbb1d4940ef8553d6377068acf20423ed48998082c20099488a0917c"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#abb0c9f7d6bbb1d4940ef8553d6377068acf20423ed48998082c20099488a0917c">Uralstech.UGemini.Schema.GeminiSchemaDataFormat.Enum</a></div><div class="ttdeci">@ Enum</div><div class="ttdoc">A string enum value.</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_schema_html_ad730020272e108c03945937e79a5055a"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">Uralstech.UGemini.Schema.GeminiSchemaDataType</a></div><div class="ttdeci">GeminiSchemaDataType</div><div class="ttdoc">Contains the list of OpenAPI data types as defined by the OpenAPI Specification.</div><div class="ttdef"><b>Definition</b> GeminiSchemaDataType.cs:12</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration.html">Uralstech.UGemini.Tools.Declaration</a></div><div class="ttdef"><b>Definition</b> GeminiFunctionCallingConfiguration.cs:6</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_tools_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_tools.html">Uralstech.UGemini.Tools</a></div><div class="ttdef"><b>Definition</b> GeminiFunctionCallingConfiguration.cs:6</div></div>
</div><!-- fragment --><p>For each function, we need a declaration with a name and description. The parameters are an object of type <code>GeminiSchema</code>, which defines the schema of each of the parameters. The type is of <code>GeminiSchemaDataType.Object</code>, and contains the dictionary of parameter schemas.</p>
<p>The keys of the dictionary should be the parameter name, and the values should be <code>GeminiSchema</code> objects which define the type, description, format, etc. of the parameter.</p>
<p>Finally, we have the <code>Required</code> property which tells Gemini which fields are absolutely required in each call. Now, we can move on to the chat.</p>
<div class="fragment"><div class="line">[SerializeField] Text _chatResponse;</div>
<div class="line"> </div>
<div class="line">async Task&lt;string&gt; OnChat(<span class="keywordtype">string</span> text)</div>
<div class="line">{</div>
<div class="line">    List&lt;GeminiContent&gt; contents = <span class="keyword">new</span>()</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(text, <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a0d462193ef311a2c0dcde6730b1cea52">GeminiRole</a>.User),</div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a> response;</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html">GeminiFunctionCall</a> functionCall;</div>
<div class="line">    <span class="keywordtype">string</span> responseText = <span class="keywordtype">string</span>.Empty;</div>
<div class="line">    <span class="keywordflow">do</span></div>
<div class="line">    {</div>
<div class="line">        response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request.html">GeminiChatRequest</a>(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#a3b0a0484e82dc1877abb45e3db5fe589">Gemini1_5Flash</a>, <span class="keyword">true</span>)</div>
<div class="line">        {</div>
<div class="line">            Contents = contents.ToArray(),</div>
<div class="line">            Tools = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool.html">GeminiTool</a>[] { _geminiFunctions },</div>
<div class="line">            ToolConfig = <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_configuration.html">GeminiToolConfiguration</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_configuration.html#ac8bbe3e1cf966bd1897b4effe01b2110">GetConfiguration</a>(<a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration.html#ac6ce3ee77e29603a6bf7e565332f7c6f">GeminiFunctionCallingMode</a>.Any),</div>
<div class="line">        });</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Don&#39;t forget to do this! If the function call is not added to the chat</span></div>
<div class="line">        <span class="comment">// history, Gemini will throw an error when receiving the response!</span></div>
<div class="line">        contents.Add(response.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#a55e6d4a65bd637dbfbb8db55b8433ea1">Candidates</a>[0].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_candidate.html#ad3ed32bfdd202e0f6d193e30666a3a79">Content</a>);</div>
<div class="line"> </div>
<div class="line">        responseText = <a class="code hl_enumvalue" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055aa4410ec34d9e6c1a68100ca0ce033fb17">Array</a>.Find(response.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Parts</a>, part =&gt; !<span class="keywordtype">string</span>.IsNullOrEmpty(part.Text))?.Text;</div>
<div class="line">        <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html">GeminiContentPart</a>[] allFunctionCalls = <a class="code hl_enumvalue" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055aa4410ec34d9e6c1a68100ca0ce033fb17">Array</a>.FindAll(response.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Parts</a>, part =&gt; part.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#a65b4f8f4fabb11319b39459cbd229267">FunctionCall</a> != <span class="keyword">null</span>);</div>
<div class="line"> </div>
<div class="line">        functionCall = <span class="keyword">null</span>;</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; allFunctionCalls.Length; i++)</div>
<div class="line">        {</div>
<div class="line">            functionCall = allFunctionCalls[i].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#a65b4f8f4fabb11319b39459cbd229267">FunctionCall</a>;</div>
<div class="line">            JObject functionResponse = <span class="keyword">null</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">switch</span> (functionCall.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#a789b27239b44a6ed066e08d357dc364c">Name</a>)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">case</span> <span class="stringliteral">&quot;printToConsole&quot;</span>:</div>
<div class="line">                    Debug.Log(functionCall.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#a5ba65a22b3ff2ed367f372c829ec0fb9">Arguments</a>[<span class="stringliteral">&quot;text&quot;</span>].ToObject&lt;<span class="keywordtype">string</span>&gt;());</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">case</span> <span class="stringliteral">&quot;changeTextColor&quot;</span>:</div>
<div class="line">                    <span class="keywordflow">if</span> (!TryChangeTextColor(functionCall.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#a5ba65a22b3ff2ed367f372c829ec0fb9">Arguments</a>[<span class="stringliteral">&quot;color&quot;</span>].ToObject&lt;<span class="keywordtype">string</span>&gt;()))</div>
<div class="line">                    {</div>
<div class="line">                        functionResponse = <span class="keyword">new</span> JObject()</div>
<div class="line">                        {</div>
<div class="line">                            [<span class="stringliteral">&quot;result&quot;</span>] = <span class="stringliteral">&quot;Unknown color.&quot;</span></div>
<div class="line">                        };</div>
<div class="line">                    }</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    functionResponse = <span class="keyword">new</span> JObject()</div>
<div class="line">                    {</div>
<div class="line">                        [<span class="stringliteral">&quot;result&quot;</span>] = <span class="stringliteral">&quot;Sorry, but that function does not exist.&quot;</span></div>
<div class="line">                    };</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            contents.Add(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(functionCall.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#adc9304ceaa0540f2705ca94f853738c3">GetResponse</a>(functionResponse ?? <span class="keyword">new</span> JObject()</div>
<div class="line">            {</div>
<div class="line">                [<span class="stringliteral">&quot;result&quot;</span>] = <span class="stringliteral">&quot;Completed executing function successfully.&quot;</span></div>
<div class="line">            })));</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (functionCall != <span class="keyword">null</span>);</div>
<div class="line"> </div>
<div class="line">    _chatResponse.text = responseText;</div>
<div class="line">    <span class="keywordflow">return</span> responseText;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> TryChangeTextColor(<span class="keywordtype">string</span> color)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (color)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="stringliteral">&quot;RED&quot;</span>:</div>
<div class="line">            _chatResponse.color = Color.red; <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> <span class="stringliteral">&quot;GREEN&quot;</span>:</div>
<div class="line">            _chatResponse.color = Color.green; <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> <span class="stringliteral">&quot;BLUE&quot;</span>:</div>
<div class="line">            _chatResponse.color = Color.blue; <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> <span class="stringliteral">&quot;WHITE&quot;</span>:</div>
<div class="line">            _chatResponse.color = Color.white; <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    Debug.Log(<span class="stringliteral">&quot;Changed text color!&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_gemini_content_part_html_a65b4f8f4fabb11319b39459cbd229267"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#a65b4f8f4fabb11319b39459cbd229267">Uralstech.UGemini.GeminiContentPart.FunctionCall</a></div><div class="ttdeci">GeminiFunctionCall FunctionCall</div><div class="ttdoc">A predicted FunctionCall returned from the model that contains a string representing the FunctionDecl...</div><div class="ttdef"><b>Definition</b> GeminiContentPart.cs:33</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_configuration_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_configuration.html">Uralstech.UGemini.Tools.Declaration.GeminiToolConfiguration</a></div><div class="ttdoc">The Tool configuration containing parameters for specifying Tool use in the request.</div><div class="ttdef"><b>Definition</b> GeminiToolConfiguration.cs:12</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_configuration_html_ac8bbe3e1cf966bd1897b4effe01b2110"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_1_1_gemini_tool_configuration.html#ac8bbe3e1cf966bd1897b4effe01b2110">Uralstech.UGemini.Tools.Declaration.GeminiToolConfiguration.GetConfiguration</a></div><div class="ttdeci">static GeminiToolConfiguration GetConfiguration(GeminiFunctionCallingMode callingMode, string[] allowedFunctions=null)</div><div class="ttdoc">Creates a new GeminiToolConfiguration.</div><div class="ttdef"><b>Definition</b> GeminiToolConfiguration.cs:25</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html">Uralstech.UGemini.Tools.GeminiFunctionCall</a></div><div class="ttdoc">A predicted FunctionCall returned from the model that contains a string representing the FunctionDecl...</div><div class="ttdef"><b>Definition</b> GeminiFunctionCall.cs:13</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call_html_a5ba65a22b3ff2ed367f372c829ec0fb9"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#a5ba65a22b3ff2ed367f372c829ec0fb9">Uralstech.UGemini.Tools.GeminiFunctionCall.Arguments</a></div><div class="ttdeci">JObject Arguments</div><div class="ttdoc">Optional. The function parameters and values in JSON object format.</div><div class="ttdef"><b>Definition</b> GeminiFunctionCall.cs:26</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call_html_a789b27239b44a6ed066e08d357dc364c"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#a789b27239b44a6ed066e08d357dc364c">Uralstech.UGemini.Tools.GeminiFunctionCall.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">The name of the function to call. Must be a-z, A-Z, 0-9, or contain underscores and dashes,...</div><div class="ttdef"><b>Definition</b> GeminiFunctionCall.cs:17</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call_html_adc9304ceaa0540f2705ca94f853738c3"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_tools_1_1_gemini_function_call.html#adc9304ceaa0540f2705ca94f853738c3">Uralstech.UGemini.Tools.GeminiFunctionCall.GetResponse</a></div><div class="ttdeci">GeminiFunctionResponse GetResponse(JObject responseJson=null)</div><div class="ttdoc">Creates a GeminiFunctionResponse for this function call.</div><div class="ttdef"><b>Definition</b> GeminiFunctionCall.cs:33</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_schema_html_ad730020272e108c03945937e79a5055aa4410ec34d9e6c1a68100ca0ce033fb17"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055aa4410ec34d9e6c1a68100ca0ce033fb17">Uralstech.UGemini.Schema.GeminiSchemaDataType.Array</a></div><div class="ttdeci">@ Array</div><div class="ttdoc">Array type.</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration_html_ac6ce3ee77e29603a6bf7e565332f7c6f"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_tools_1_1_declaration.html#ac6ce3ee77e29603a6bf7e565332f7c6f">Uralstech.UGemini.Tools.Declaration.GeminiFunctionCallingMode</a></div><div class="ttdeci">GeminiFunctionCallingMode</div><div class="ttdoc">Defines the execution behavior for function calling by defining the execution mode.</div><div class="ttdef"><b>Definition</b> GeminiFunctionCallingMode.cs:12</div></div>
</div><!-- fragment --><p>Here, we are going through each response, checking if a function was called, and calling the requested function.</p>
<p>The response is a JSON object, which is optional, but it is recommended to include. Note the use of <code>GeminiToolConfiguration.GetConfiguration</code>, which is a utility method to create a <code>GeminiToolConfiguration</code> with the given <code>GeminiFunctionCallingMode</code>. Here, it is <code>GeminiFunctionCallingMode.Any</code>, which means Gemini will always call at least one function in each conversation.</p>
<p>After the function is called, we respond by adding the calls and responses to the history. We use the <code>GetResponse</code> utility method to get a <code>GeminiFunctionResponse</code> object with the response JSON.</p>
<p>Function calling is, as of writing, only available in the Beta API.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
JSON Response Mode</h3>
<p>In JSON mode, Gemini will always respond in the specified JSON response schema.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html">Uralstech.UGemini.Chat</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html">Uralstech.UGemini.Schema</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;string&gt; OnChat(<span class="keywordtype">string</span> text)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Note: It seems GeminiModel.Gemini1_5Flash is not very good at JSON.</span></div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html">GeminiChatResponse</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_request.html">GeminiChatRequest</a>(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#adadc5fec3cd85e2d6965bf4de43bddc0">Gemini1_5Pro</a>, <span class="keyword">true</span>)</div>
<div class="line">    {</div>
<div class="line">        Contents = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>[]</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(text, <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a0d462193ef311a2c0dcde6730b1cea52">GeminiRole</a>.User),</div>
<div class="line">        },</div>
<div class="line">        SystemInstruction = <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(<span class="stringliteral">&quot;You are a helpful math teacher who teacher their students mathematics in the most helpful way possible.&quot;</span>),</div>
<div class="line">        GenerationConfig = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_generation_configuration.html">GeminiGenerationConfiguration</a>()</div>
<div class="line">        {</div>
<div class="line">            ResponseMimeType = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_chat.html#a9c2f503426f177d74c1c489e32bb4147">GeminiResponseType</a>.Json,</div>
<div class="line">            ResponseSchema = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">            {</div>
<div class="line">                Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.Array,</div>
<div class="line">                Description = <span class="stringliteral">&quot;A list of mathematical expressions.&quot;</span>,</div>
<div class="line">                Items = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">                {</div>
<div class="line">                    Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.Object,</div>
<div class="line">                    Properties = <span class="keyword">new</span> Dictionary&lt;string, GeminiSchema&gt;()</div>
<div class="line">                    {</div>
<div class="line">                        {</div>
<div class="line">                            <span class="stringliteral">&quot;expression&quot;</span>, <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">                            {</div>
<div class="line">                                Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.String,</div>
<div class="line">                            }</div>
<div class="line">                        },</div>
<div class="line">                        {</div>
<div class="line">                            <span class="stringliteral">&quot;explanation&quot;</span>, <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_schema_1_1_gemini_schema.html">GeminiSchema</a>()</div>
<div class="line">                            {</div>
<div class="line">                                Type = <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini_1_1_schema.html#ad730020272e108c03945937e79a5055a">GeminiSchemaDataType</a>.String,</div>
<div class="line">                            }</div>
<div class="line">                        },</div>
<div class="line">                    },</div>
<div class="line">                    Required = <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;expression&quot;</span>, <span class="stringliteral">&quot;explanation&quot;</span>, },</div>
<div class="line">                },</div>
<div class="line">            },</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> response.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_chat_response.html#af1d3aa0f8c16eea71168233a6b1666c2">Parts</a>[0].<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_gemini_content_part.html#af9e3d8f3de91a004055ee2599a1b75d4">Text</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_generation_configuration_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_chat_1_1_gemini_generation_configuration.html">Uralstech.UGemini.Chat.GeminiGenerationConfiguration</a></div><div class="ttdoc">Configuration options for model generation and outputs. Not all parameters may be configurable for ev...</div><div class="ttdef"><b>Definition</b> GeminiGenerationConfiguration.cs:13</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_html_adadc5fec3cd85e2d6965bf4de43bddc0"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#adadc5fec3cd85e2d6965bf4de43bddc0">Uralstech.UGemini.Models.GeminiModel.Gemini1_5Pro</a></div><div class="ttdeci">static readonly GeminiModelId Gemini1_5Pro</div><div class="ttdoc">Gemini 1.5 Pro is a mid-size multimodal model that is optimized for a wide-range of reasoning tasks....</div><div class="ttdef"><b>Definition</b> GeminiModel.cs:46</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_chat_html_a9c2f503426f177d74c1c489e32bb4147"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_chat.html#a9c2f503426f177d74c1c489e32bb4147">Uralstech.UGemini.Chat.GeminiResponseType</a></div><div class="ttdeci">GeminiResponseType</div><div class="ttdoc">The response type for Gemini model responses.</div><div class="ttdef"><b>Definition</b> GeminiResponseType.cs:12</div></div>
</div><!-- fragment --><p>Here, we used a schema for an array of objects, which contain two parameters: <code>expression</code> and <code>explanation</code>. We have told Gemini to split the response into the parameters, where a mathematical expression and its explanation is given.</p>
<p>The <code>GeminiSchema</code> object is the same type used for function calling.</p>
<p>JSON mode is also only available in the Beta API.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Model Metadata</h2>
<p>The <code><a class="el" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a></code> namespace has request types to help retrieve metadata of Gemini models through <code>GeminiModelGetRequest</code> and <code>GeminiModelListRequest</code>.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
GeminiModelGetRequest</h3>
<p>Gets information about a specific model by running a <code>get</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;GeminiModel&gt; GetModel(<span class="keywordtype">string</span> modelId)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_get_request.html">GeminiModelGetRequest</a>(modelId));</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_get_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_get_request.html">Uralstech.UGemini.Models.GeminiModelGetRequest</a></div><div class="ttdoc">Gets information about a specific model. Return type is GeminiModel.</div><div class="ttdef"><b>Definition</b> GeminiModelGetRequest.cs:7</div></div>
</div><!-- fragment --><p>We just give the unique ID of the model, like <code>gemini-pro</code> or <code>gemini-1.5-flash</code>, and we get a <code>GeminiModel</code> object as the response!</p>
<p>Just one thing to note: the newer models will not be recognized by the request if you're not using the Beta API.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
GeminiModelListRequest</h3>
<p>Gets information about all models by running a <code>list</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;GeminiModel[]&gt; ListModels(<span class="keywordtype">int</span> maxModels = 50, <span class="keywordtype">string</span> pageToken = <span class="keywordtype">string</span>.Empty)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response.html">GeminiModelListResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response.html">GeminiModelListResponse</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_request.html">GeminiModelListRequest</a>()</div>
<div class="line">    {</div>
<div class="line">        MaxResponseModels = maxModels,</div>
<div class="line">        PageToken = <span class="keywordtype">string</span>.IsNullOrWhiteSpace(pageToken) ? string.Empty : pageToken,</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> response?.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response.html#a3b7f509989fe91bdc4325ae100e97963">Models</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_request.html">Uralstech.UGemini.Models.GeminiModelListRequest</a></div><div class="ttdoc">Requests metadata for all existing models. Return type is GeminiModelListResponse.</div><div class="ttdef"><b>Definition</b> GeminiModelListRequest.cs:7</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response.html">Uralstech.UGemini.Models.GeminiModelListResponse</a></div><div class="ttdoc">The response for a GeminiModelListResponse call.</div><div class="ttdef"><b>Definition</b> GeminiModelListResponse.cs:11</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response_html_a3b7f509989fe91bdc4325ae100e97963"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model_list_response.html#a3b7f509989fe91bdc4325ae100e97963">Uralstech.UGemini.Models.GeminiModelListResponse.Models</a></div><div class="ttdeci">GeminiModel[] Models</div><div class="ttdoc">The list of models.</div><div class="ttdef"><b>Definition</b> GeminiModelListResponse.cs:16</div></div>
</div><!-- fragment --><p><code>MaxResponseModels</code> is the total number of pages you want to retrieve in each request, and <code>PageToken</code> is the 'identifier' for the requested page in the multiple pages of file metadata. You can leave it empty to get the first page, and use <code>response.NextPageToken</code> as the token for for the next page, and run the request again with it.</p>
<p>Again, the newer models will not be recognized by the request if you're not using the Beta API.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
GeminiTokenCountRequest</h2>
<p>Available in the <code><a class="el" href="namespace_uralstech_1_1_u_gemini_1_1_token_counting.html">Uralstech.UGemini.TokenCounting</a></code> namespace. Counts the number of tokens in the given request contents for the given model by running a <code>countTokens</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_models.html">Uralstech.UGemini.Models</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_token_counting.html">Uralstech.UGemini.TokenCounting</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;int&gt; CountTokens(<span class="keywordtype">string</span> text)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response.html">GeminiTokenCountResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response.html">GeminiTokenCountResponse</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_request.html">GeminiTokenCountRequest</a>(<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html">GeminiModel</a>.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_models_1_1_gemini_model.html#a3b0a0484e82dc1877abb45e3db5fe589">Gemini1_5Flash</a>)</div>
<div class="line">    {</div>
<div class="line">        Contents = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>[]</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html">GeminiContent</a>.<a class="code hl_function" href="class_uralstech_1_1_u_gemini_1_1_gemini_content.html#adf06a76c715005062c9f5d91f79af90a">GetContent</a>(text, <a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a0d462193ef311a2c0dcde6730b1cea52">GeminiRole</a>.User),</div>
<div class="line">        },</div>
<div class="line">    });</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> response.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response.html#ac30f0c1df0556b19f9c5424f39fcc68e">TotalTokens</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_request.html">Uralstech.UGemini.TokenCounting.GeminiTokenCountRequest</a></div><div class="ttdoc">Request to count tokens in given content.</div><div class="ttdef"><b>Definition</b> GeminiTokenCountRequest.cs:15</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response.html">Uralstech.UGemini.TokenCounting.GeminiTokenCountResponse</a></div><div class="ttdoc">A response from CountTokens.</div><div class="ttdef"><b>Definition</b> GeminiTokenCountResponse.cs:11</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response_html_ac30f0c1df0556b19f9c5424f39fcc68e"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_token_counting_1_1_gemini_token_count_response.html#ac30f0c1df0556b19f9c5424f39fcc68e">Uralstech.UGemini.TokenCounting.GeminiTokenCountResponse.TotalTokens</a></div><div class="ttdeci">int TotalTokens</div><div class="ttdoc">The number of tokens that the model tokenizes the prompt into.</div><div class="ttdef"><b>Definition</b> GeminiTokenCountResponse.cs:20</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_token_counting_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_token_counting.html">Uralstech.UGemini.TokenCounting</a></div><div class="ttdef"><b>Definition</b> GeminiTokenCountRequest.cs:9</div></div>
</div><!-- fragment --><p>We just include the content to count the tokens of and send the request! You can also have a whole <code>GeminiChatRequest</code> as an argument in <code>GeminiTokenCountRequest.CompleteRequest</code> for the token counting request to see how much a chat request has/will cost you.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
File API</h2>
<p>The Gemini File API can be used to store data on the cloud for future prompting with the Gemini models. The code for most of these requests is very simple.</p>
<p>All File API types are available in the <code><a class="el" href="namespace_uralstech_1_1_u_gemini_1_1_file_a_p_i.html">Uralstech.UGemini.FileAPI</a></code> namespace. The File API is only available in the Beta API.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
Uploading Files</h3>
<p>Uploads a file to be available through the File API by running an <code>upload</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_file_a_p_i.html">Uralstech.UGemini.FileAPI</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;GeminiFile&gt; UploadFile(<span class="keywordtype">string</span> text)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response.html">GeminiFileUploadResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response.html">GeminiFileUploadResponse</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_request.html">GeminiFileUploadRequest</a>(<a class="code hl_enumeration" href="namespace_uralstech_1_1_u_gemini.html#a9a890005b5ee88d5fe8e33a592f1c73c">GeminiContentType</a>.TextPlain.MimeType())</div>
<div class="line">    {</div>
<div class="line">        File = <span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_meta_data.html">GeminiFileUploadMetaData</a>()</div>
<div class="line">        {</div>
<div class="line">            DisplayName = <span class="stringliteral">&quot;I&#39;m a File&quot;</span>,</div>
<div class="line">        },</div>
<div class="line">        RawData = Encoding.UTF8.GetBytes(text)</div>
<div class="line">    });</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> response.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response.html#a8ee075c5fa1d1daefe2c4cc000eb82c6">File</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_meta_data_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_meta_data.html">Uralstech.UGemini.FileAPI.GeminiFileUploadMetaData</a></div><div class="ttdoc">Metadata for a GeminiFile to be uploaded.</div><div class="ttdef"><b>Definition</b> GeminiFileUploadMetaData.cs:12</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_request.html">Uralstech.UGemini.FileAPI.GeminiFileUploadRequest</a></div><div class="ttdoc">Uploads a file to the Gemini File API. Response type is GeminiFileUploadResponse.</div><div class="ttdef"><b>Definition</b> GeminiFileUploadRequest.cs:15</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response.html">Uralstech.UGemini.FileAPI.GeminiFileUploadResponse</a></div><div class="ttdoc">Response for a file upload request.</div><div class="ttdef"><b>Definition</b> GeminiFileUploadResponse.cs:11</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response_html_a8ee075c5fa1d1daefe2c4cc000eb82c6"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_upload_response.html#a8ee075c5fa1d1daefe2c4cc000eb82c6">Uralstech.UGemini.FileAPI.GeminiFileUploadResponse.File</a></div><div class="ttdeci">GeminiFile File</div><div class="ttdoc">Metadata for the created file.</div><div class="ttdef"><b>Definition</b> GeminiFileUploadResponse.cs:15</div></div>
<div class="ttc" id="anamespace_uralstech_1_1_u_gemini_1_1_file_a_p_i_html"><div class="ttname"><a href="namespace_uralstech_1_1_u_gemini_1_1_file_a_p_i.html">Uralstech.UGemini.FileAPI</a></div><div class="ttdef"><b>Definition</b> GeminiFileListRequest.cs:2</div></div>
</div><!-- fragment --><p>That's it! Convert your data to a byte array and just give the right MIME type as an argument! Setting the file upload metadata is optional.</p>
<p>Please note that setting <code>GeminiFileUploadMetaData.Name</code> will always throw an error and it seems to be an API issue.</p>
<h3><a class="anchor" id="autotoc_md19"></a>
Listing All Files</h3>
<p>Requests the metadata for all existing files uploaded to the File API by running a <code>list</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_file_a_p_i.html">Uralstech.UGemini.FileAPI</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;GeminiFile[]&gt; ListFiles(<span class="keywordtype">int</span> maxFiles = 10, <span class="keywordtype">string</span> pageToken = <span class="keywordtype">string</span>.Empty)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response.html">GeminiFileListResponse</a> response = await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response.html">GeminiFileListResponse</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_request.html">GeminiFileListRequest</a>()</div>
<div class="line">    {</div>
<div class="line">        MaxResponseFiles = maxFiles,</div>
<div class="line">        PageToken = <span class="keywordtype">string</span>.IsNullOrWhiteSpace(pageToken) ? string.Empty : pageToken,</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> response?.<a class="code hl_variable" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response.html#abc46e3038da55dd1b533ae0c515671f5">Files</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_request.html">Uralstech.UGemini.FileAPI.GeminiFileListRequest</a></div><div class="ttdoc">Requests metadata for all existing files. Return type is GeminiFileListResponse.</div><div class="ttdef"><b>Definition</b> GeminiFileListRequest.cs:7</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response.html">Uralstech.UGemini.FileAPI.GeminiFileListResponse</a></div><div class="ttdoc">The response for a GeminiFileListRequest call.</div><div class="ttdef"><b>Definition</b> GeminiFileListResponse.cs:11</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response_html_abc46e3038da55dd1b533ae0c515671f5"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_list_response.html#abc46e3038da55dd1b533ae0c515671f5">Uralstech.UGemini.FileAPI.GeminiFileListResponse.Files</a></div><div class="ttdeci">GeminiFile[] Files</div><div class="ttdoc">The list of files.</div><div class="ttdef"><b>Definition</b> GeminiFileListResponse.cs:16</div></div>
</div><!-- fragment --><p><code>MaxResponseFiles</code> is the total number of pages you want to retrieve in each request, and <code>PageToken</code> is the 'identifier' for the requested page in the multiple pages of file metadata. You can leave it empty to get the first page, and use <code>response.NextPageToken</code> as the token for for the next page, and run the request again with it.</p>
<h3><a class="anchor" id="autotoc_md20"></a>
Retrieving File Metadata</h3>
<p>Requests metadata for a single file uploaded to the File API by running a <code>get</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_file_a_p_i.html">Uralstech.UGemini.FileAPI</a>;</div>
<div class="line"> </div>
<div class="line">async Task&lt;GeminiFile&gt; GetFile(<span class="keywordtype">string</span> fileId)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request&lt;<a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file.html">GeminiFile</a>&gt;(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_get_request.html">GeminiFileGetRequest</a>(fileId));</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_get_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_get_request.html">Uralstech.UGemini.FileAPI.GeminiFileGetRequest</a></div><div class="ttdoc">Requests metadata for an existing file. Return type is GeminiFile.</div><div class="ttdef"><b>Definition</b> GeminiFileGetRequest.cs:7</div></div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file.html">Uralstech.UGemini.FileAPI.GeminiFile</a></div><div class="ttdoc">Metadata for a file uploaded to the File API.</div><div class="ttdef"><b>Definition</b> GeminiFile.cs:13</div></div>
</div><!-- fragment --><p>Just put in the file's ID! You can get it from the <code>GeminiFile.Name</code> property, but remember to remove the "files/" prefix.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Deleting a File</h3>
<p>Deletes a file uploaded to the File API by running a <code>delete</code> request.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini.html">Uralstech.UGemini</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_uralstech_1_1_u_gemini_1_1_file_a_p_i.html">Uralstech.UGemini.FileAPI</a>;</div>
<div class="line"> </div>
<div class="line">async <span class="keywordtype">void</span> DeleteFile(<span class="keywordtype">string</span> fileId)</div>
<div class="line">{</div>
<div class="line">    await <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_gemini_manager.html">GeminiManager</a>.<a class="code hl_property" href="class_uralstech_1_1_u_gemini_1_1_utils_1_1_singleton_1_1_singleton.html#a84485d2d649cb79a823a37e96821067c">Instance</a>.Request(<span class="keyword">new</span> <a class="code hl_class" href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_delete_request.html">GeminiFileDeleteRequest</a>(fileId));</div>
<div class="line">    Debug.Log(<span class="stringliteral">&quot;File deleted.&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_delete_request_html"><div class="ttname"><a href="class_uralstech_1_1_u_gemini_1_1_file_a_p_i_1_1_gemini_file_delete_request.html">Uralstech.UGemini.FileAPI.GeminiFileDeleteRequest</a></div><div class="ttdoc">Requests the deletion of a file.</div><div class="ttdef"><b>Definition</b> GeminiFileDeleteRequest.cs:7</div></div>
</div><!-- fragment --><p>Again, just put in the file's ID!</p>
<h2><a class="anchor" id="autotoc_md22"></a>
Samples</h2>
<p>For full-fledged examples of the features of this package, check out the samples included in the package:</p>
<h3><a class="anchor" id="autotoc_md23"></a>
Mult-turn Chat</h3>
<p>A sample scene showing a multi-turn chat system. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/SimpleMultiTurnChatSample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md24"></a>
Function Calling</h3>
<p>A sample scene showing a function calling system. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/FunctionCallingSample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md25"></a>
Streaming Generated Content</h3>
<p>A sample showing a system which streams Gemini's responses, including function calls. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/StreamedFunctionCallingSample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md26"></a>
Question Answering</h3>
<p>A sample scene with a system where Gemini answers questions based only on the given context. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/QuestionAnsweringSample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md27"></a>
Prompting with File API</h3>
<p>A sample scene with a system to create, delete, retrieve, list and prompt Gemini with files stored in the File/Media API endpoints. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/FileAPISample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md28"></a>
JSON Response</h3>
<p>A sample scene showing a system where Gemini responds in a specified JSON format. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/JSONResponseSample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md29"></a>
List and Get Model Metadata</h3>
<p>A sample scene with a system to list, get and chat with models using the models.get and models.list endpoints. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/ModelMetadataRetrievalSample"><em><b>GitHub Source</b></em></a></p>
<h3><a class="anchor" id="autotoc_md30"></a>
Token Counting</h3>
<p>A sample scene showing a token counting system using the <code>countTokens</code> endpoint. <a href="https://github.com/Uralstech/UGemini/tree/master/UGemini/Packages/com.uralstech.ugemini/Samples~/TokenCounterSample"><em><b>GitHub Source</b></em></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
